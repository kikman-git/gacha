{"ast":null,"code":"var _jsxFileName = \"/home/kikman/JavaScript/Gacha/gacha/gacha/src/components/Gacha.js\";\nimport React, { Component } from 'react';\nimport '../styles/Gacha.css';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport LogoutButton from './LogoutButton';\nimport gacha from '../resources/gacha_img.png';\nimport gacha_ball from '../resources/gacha_ball.png';\nimport gacha_btn from '../resources/gacha_btn.png'; // TODO: undo function CouponGenerator; CouponHandler();\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\nfunction CouponGenerator() {\n  let valueChoices = [null, '10%', '100y', '200y', '500y', '1000y', '10000y'];\n  let valueIndex = getRandomInt(7);\n  console.log(valueChoices[valueIndex]);\n\n  if (valueIndex !== 0) {\n    return {\n      genre: 'GEN',\n      //   user: JSON.parse(window.sessionStorage.getItem('data'))['user_id'],\n      expire_date: '2021-10-10',\n      value: valueChoices[valueIndex],\n      status: true\n    };\n  }\n}\n\n_c = CouponGenerator;\n\nasync function addPost() {\n  let body = JSON.stringify(CouponGenerator()); // store Gacha Info in the sessionStorage.\n\n  window.sessionStorage.setItem('CouponData', JSON.stringify(CouponGenerator()));\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Token ${JSON.parse(window.sessionStorage.getItem('data'))['token']}`\n    }\n  };\n\n  try {\n    const response = await axios.post('http://127.0.0.1:8000/coupons/create/', body, config);\n    console.log(response);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nclass Gacha extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: false,\n      couponActive: false\n    };\n    this.AnimaHandler = this.AnimaHandler.bind(this);\n    this.CouponHandler = this.CouponHandler.bind(this);\n  }\n\n  AnimaHandler() {\n    const currentState = this.state.active;\n    this.setState({\n      active: !currentState\n    });\n    let body = JSON.stringify(CouponGenerator());\n    console.log(body);\n    window.sessionStorage.setItem('CouponData', JSON.stringify(CouponGenerator()));\n  }\n\n  CouponHandler() {\n    const currentState = this.state;\n    this.setState({\n      couponActive: !currentState.couponActive\n    });\n    console.log(currentState.couponActive); //addPost(); // Post to backend server\n  }\n\n  render() {\n    if (this.state.couponActive) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/Award\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"GachaContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Logout\",\n        children: /*#__PURE__*/_jsxDEV(LogoutButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: gacha,\n        alt: \"gacha\",\n        className: \"Gacha\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: gacha_btn,\n        alt: \"gacha_btn\",\n        className: this.state.active ? 'GachaBtn GachaBtn-rotate' : 'GachaBtn',\n        onClick: this.AnimaHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: gacha_ball,\n        alt: \"gacha_ball\",\n        className: this.state.active ? 'GachaBall GachaBall-anima' : 'GachaBall',\n        onClick: this.CouponHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"playBtn\",\n        onClick: this.AnimaHandler,\n        children: [' ', \"Play\", ' ']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Gacha;\n\nvar _c;\n\n$RefreshReg$(_c, \"CouponGenerator\");","map":{"version":3,"sources":["/home/kikman/JavaScript/Gacha/gacha/gacha/src/components/Gacha.js"],"names":["React","Component","Redirect","axios","LogoutButton","gacha","gacha_ball","gacha_btn","getRandomInt","max","Math","floor","random","CouponGenerator","valueChoices","valueIndex","console","log","genre","expire_date","value","status","addPost","body","JSON","stringify","window","sessionStorage","setItem","config","headers","Authorization","parse","getItem","response","post","err","Gacha","constructor","props","state","active","couponActive","AnimaHandler","bind","CouponHandler","currentState","setState","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../styles/Gacha.css';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport LogoutButton  from './LogoutButton';\nimport gacha from '../resources/gacha_img.png';\nimport gacha_ball from '../resources/gacha_ball.png';\nimport gacha_btn from '../resources/gacha_btn.png';\n\n// TODO: undo function CouponGenerator; CouponHandler();\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\nfunction CouponGenerator() {\n    \n  let valueChoices = [null, '10%', '100y', '200y', '500y', '1000y', '10000y'];\n  let valueIndex = getRandomInt(7);\n  console.log(valueChoices[valueIndex]);\n  if (valueIndex !== 0) {\n    return {\n      genre: 'GEN',\n    //   user: JSON.parse(window.sessionStorage.getItem('data'))['user_id'],\n      expire_date: '2021-10-10',\n      value: valueChoices[valueIndex],\n      status: true,\n    };\n  }\n}\n\nasync function addPost() {\n  let body = JSON.stringify(CouponGenerator());\n  // store Gacha Info in the sessionStorage.\n  window.sessionStorage.setItem('CouponData', JSON.stringify(CouponGenerator()));\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Token ${\n        JSON.parse(window.sessionStorage.getItem('data'))['token']\n      }`,\n    },\n  };\n\n  try {\n    const response = await axios.post(\n      'http://127.0.0.1:8000/coupons/create/',\n      body,\n      config\n    );\n    console.log(response);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nclass Gacha extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      active: false,\n      couponActive: false,\n    };\n\n\n    this.AnimaHandler = this.AnimaHandler.bind(this);\n    this.CouponHandler = this.CouponHandler.bind(this);\n  }\n\n  AnimaHandler() {\n    const currentState = this.state.active;\n    this.setState({ active: !currentState });\n\n    let body = JSON.stringify(CouponGenerator());\n    console.log(body);\n    window.sessionStorage.setItem('CouponData', JSON.stringify(CouponGenerator()));\n  }\n\n\n  CouponHandler() {\n    const currentState = this.state;\n    this.setState({ couponActive: !currentState.couponActive });\n    console.log(currentState.couponActive);\n    //addPost(); // Post to backend server\n  }\n\n  render() {\n    if (this.state.couponActive) {\n      return <Redirect to=\"/Award\" />;\n    }\n    return (\n      <div className=\"GachaContainer\">\n        <div className=\"Logout\">\n          <LogoutButton/>\n        </div>\n        <img src={gacha} alt=\"gacha\" className=\"Gacha\" />\n        <img\n          src={gacha_btn}\n          alt=\"gacha_btn\"\n          className={\n            this.state.active ? 'GachaBtn GachaBtn-rotate' : 'GachaBtn'\n          }\n          onClick={this.AnimaHandler}\n        />\n        <img\n          src={gacha_ball}\n          alt=\"gacha_ball\"\n          className={\n            this.state.active ? 'GachaBall GachaBall-anima' : 'GachaBall'\n          }\n          onClick={this.CouponHandler}\n        />\n        <button className=\"playBtn\" onClick={this.AnimaHandler}>\n          {' '}\n          Play{' '}\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default Gacha;\n"]},"metadata":{},"sourceType":"module"}